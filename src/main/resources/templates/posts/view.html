<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${post.title + ' - CyberLab Forum'}">Post Title - CyberLab</title>
    
    <link rel="stylesheet" th:href="@{/css/base.css}">
    <link rel="stylesheet" th:href="@{/css/components.css}">
    <link rel="stylesheet" th:href="@{/css/posts.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-content">
                <a th:href="@{/}" class="navbar-brand">
                    <i class="fas fa-shield-alt"></i>
                    CyberLab
                </a>
                
                <ul class="navbar-nav">
                    <li><a th:href="@{/}" class="nav-link"><i class="fas fa-home"></i> Home</a></li>
                    <li><a th:href="@{/labs}" class="nav-link"><i class="fas fa-flask"></i> Labs</a></li>
                    <li><a th:href="@{/posts}" class="nav-link active"><i class="fas fa-code"></i> Community</a></li>
                    <li sec:authorize="isAuthenticated()">
                        <a th:href="@{/dashboard}" class="nav-link"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
                    </li>
                    
                    <li sec:authorize="isAuthenticated()" class="user-menu">
                        <div class="user-dropdown">
                            <button class="user-btn">
                                <i class="fas fa-user"></i>
                                <span th:text="${#authentication.name}">User</span>
                                <i class="fas fa-chevron-down"></i>
                            </button>
                            <div class="dropdown-content">
                                <a th:href="@{/profile}"><i class="fas fa-user-circle"></i> Profile</a>
                                <hr>
                                <form th:action="@{/logout}" method="post">
                                    <button type="submit" class="logout-btn">
                                        <i class="fas fa-sign-out-alt"></i> Logout
                                    </button>
                                </form>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="post-view-container">
        <div class="container">
            <nav class="breadcrumb">
                <a th:href="@{/}" class="breadcrumb-item">Home</a>
                <a th:href="@{/posts}" class="breadcrumb-item">Forum</a>
                <a th:href="@{/posts/category/{id}(id=${post.category.id})}" class="breadcrumb-item" th:text="${post.category.name}">Category</a>
                <span class="breadcrumb-item active" th:text="${#strings.abbreviate(post.title, 50)}">Post Title</span>
            </nav>

            <div class="post-view-grid">
                <main class="post-main">
                    <article class="post-article">
                        <header class="post-header">
                            <div class="post-badges">
                                <span class="post-type" th:classappend="${post.postType.name().toLowerCase()}"
                                      th:text="${post.postType.name()}">Discussion</span>
                                <span class="post-category" th:text="${post.category.name}">XSS</span>
                            </div>
                            
                            <h1 class="post-title" th:text="${post.title}">Post Title Here</h1>
                            
                            <div class="post-meta">
                                <div class="author-info">
                                    <img class="author-avatar" 
                                         th:if="${post.author.avatar != null and post.author.avatar != ''}"
                                         th:src="@{'/uploads/avatars/' + ${post.author.avatar}}" 
                                         th:alt="${post.author.username + ' avatar'}"
                                         onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                                    <img class="author-avatar" 
                                         th:if="${post.author.avatar == null or post.author.avatar == ''}"
                                         src="/images/default-avatar.png" alt="Default Avatar">
                                    <div>
                                        <a th:href="@{/users/{username}(username=${post.author.username})}" 
                                           class="author-name" th:text="${post.author.username}">author</a>
                                        <div class="author-badges">
                                            <span class="badge" th:if="${post.author.role.name() == 'ADMIN'}">
                                                <i class="fas fa-shield-alt"></i> Admin
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="post-info">
                                    <span class="post-date">
                                        <i class="fas fa-clock"></i>
                                        <span th:text="${#temporals.format(post.createdDate, 'MMM dd, yyyy HH:mm')}">2 hours ago</span>
                                    </span>
                                    <span class="post-views">
                                        <i class="fas fa-eye"></i>
                                        <span th:text="${post.viewCount}">123</span> views
                                    </span>
                                </div>
                            </div>
                        </header>

                        <div class="post-body" th:utext="${post.content}">
                            <p>Post content goes here...</p>
                        </div>

                        <footer class="post-footer">
                            <div class="post-tags" th:if="${post.tags}">
                                <i class="fas fa-tags"></i>
                                <span th:each="tag : ${#strings.listSplit(post.tags, ',')}" 
                                      class="tag" th:text="${#strings.trim(tag)}">tag</span>
                            </div>
                            
                            <!-- ✅ AGGIORNATO: Post actions con pulsante Delete -->
                            <div class="post-actions">
                                <div class="action-buttons">
                                    <!-- Pulsante Edit (esistente) -->
                                    <a class="action-btn edit-btn" th:if="${canEdit}"
                                       th:href="@{/posts/{id}/edit(id=${post.id})}">
                                        <i class="fas fa-edit"></i> Edit
                                    </a>
                                    
                                    <!-- ✅ NUOVO: Pulsante Delete per proprietario o admin -->
                                    <button class="action-btn delete-btn" 
                                            th:if="${canEdit}"
                                            onclick="deletePost()">
                                        <i class="fas fa-trash"></i> Delete
                                    </button>
                                </div>
                            </div>
                        </footer>
                    </article>

                    <section class="comments-section">
                        <h2 class="comments-title">
                            <i class="fas fa-comments"></i>
                            Comments (<span id="commentCount" th:text="${comments != null ? comments.size() : 0}">0</span>)
                        </h2>

                        <div class="comment-form-wrapper" sec:authorize="isAuthenticated()">
                            <form id="commentForm" class="comment-form">
                                <input type="hidden" id="postId" th:value="${post.id}">
                                <div class="form-group">
                                    <textarea id="content" name="content" class="form-input comment-textarea" 
                                              placeholder="Share your thoughts..." rows="4" required></textarea>
                                </div>
                                <div class="form-actions">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-paper-plane"></i> Post Comment
                                    </button>
                                    <button type="button" class="btn btn-secondary" onclick="cancelComment()">
                                        Cancel
                                    </button>
                                </div>
                            </form>
                        </div>

                        <div class="login-prompt" sec:authorize="!isAuthenticated()">
                            <p><i class="fas fa-info-circle"></i> Please <a th:href="@{/login}">login</a> to comment</p>
                        </div>

                        <div id="commentsList" class="comments-list">
                            <div class="comment-item" th:each="comment : ${comments}" th:id="'comment-' + ${comment.id}">
                                <div class="comment-content">
                                    <div class="comment-header">
                                        <span class="comment-author">
                                            <img style="width: 20px; height: 20px; border-radius: 50%; margin-right: 5px; vertical-align: middle;"
                                                 th:if="${comment.author.avatar != null and comment.author.avatar != ''}"
                                                 th:src="@{'/uploads/avatars/' + ${comment.author.avatar}}" 
                                                 th:alt="${comment.author.username + ' avatar'}"
                                                 onerror="this.style.display='none';">
                                            <a th:href="@{/users/{username}(username=${comment.author.username})}"
                                               th:text="${comment.author.username}">commenter</a>
                                        </span>
                                        <span class="comment-time" th:text="${#temporals.format(comment.createdDate, 'MMM dd, yyyy HH:mm')}">5 min ago</span>
                                    </div>
                                    
                                    <div class="comment-body" th:text="${comment.content}">
                                        Comment content here...
                                    </div>
                                    
                                    <div class="comment-actions">
                                        <button class="comment-action" sec:authorize="isAuthenticated()"
                                                th:onclick="'likeComment(' + ${comment.id} + ')'">
                                            <i class="fas fa-heart"></i> Like (<span th:text="${comment.likeCount}">0</span>)
                                        </button>
                                        
                                        <button th:id="'report-btn-' + ${comment.id}" class="comment-action" sec:authorize="isAuthenticated()"
                                                th:if="${comment.author.username != #authentication?.name}"
                                                th:onclick="'showReportModal(' + ${comment.id} + ')'">
                                            <i class="fas fa-flag"></i> Report
                                        </button>
                                        
										<button class="comment-action danger" 
										        th:if="${comment.author.username == #authentication?.name} or ${#authorization.expression('hasRole(''ADMIN'')')}"
										        th:onclick="'deleteComment(' + ${comment.id} + ')'">
										    <i class="fas fa-trash"></i> Delete
										</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div th:if="${comments == null or comments.empty}" class="empty-comments">
                            <p><i class="fas fa-comments"></i> No comments yet. Be the first to share your thoughts!</p>
                        </div>
                    </section>
                </main>

                <aside class="post-sidebar">
                    <div class="sidebar-card author-card">
                        <h3>About the Author</h3>
                        <div class="author-details">
                            <img class="author-avatar large" 
                                 th:if="${post.author.avatar != null and post.author.avatar != ''}"
                                 th:src="@{'/uploads/avatars/' + ${post.author.avatar}}" 
                                 th:alt="${post.author.username + ' avatar'}"
                                 onerror="this.src='/images/default-avatar.png';">
                            <img class="author-avatar large" 
                                 th:if="${post.author.avatar == null or post.author.avatar == ''}"
                                 src="/images/default-avatar.png" alt="Default Avatar">
                            <h4 th:text="${post.author.username}">author</h4>
                            <div class="author-stats">
                                <div class="stat">
                                    <span class="value" th:text="${post.author.posts != null ? post.author.posts.size() : 0}">0</span>
                                    <span class="label">Posts</span>
                                </div>
                                <div class="stat">
                                    <span class="value" th:text="${#temporals.format(post.author.joinDate, 'yyyy')}">2024</span>
                                    <span class="label">Member Since</span>
                                </div>
                            </div>
                           
                        </div>
                    </div>

                    <div class="sidebar-card" th:if="${relatedPosts != null and !relatedPosts.empty}">
                        <h3><i class="fas fa-link"></i> Related Posts</h3>
                        <div class="related-posts">
                            <a th:each="related : ${relatedPosts}" 
                               th:href="@{/posts/{id}(id=${related.id})}" 
                               class="related-post">
                                <h4 th:text="${related.title}">Related Post Title</h4>
                                <span class="meta">
                                    <i class="fas fa-eye"></i> 
                                    <span th:text="${related.viewCount}">123</span> views
                                </span>
                            </a>
                        </div>
                    </div>

                    <div class="sidebar-card stats-card">
                        <h3><i class="fas fa-chart-bar"></i> Post Statistics</h3>
                        <div class="post-stats-detail">
                            <div class="stat-row">
                                <span class="label">Views</span>
                                <span class="value" th:text="${post.viewCount}">0</span>
                            </div>
                            <div class="stat-row">
                                <span class="label">Comments</span>
                                <span class="value" th:text="${comments != null ? comments.size() : 0}">0</span>
                            </div>
                            <div class="stat-row">
                                <span class="label">Created</span>
                                <span class="value" th:text="${#temporals.format(post.createdDate, 'MMM d, yyyy')}">Jan 1, 2024</span>
                            </div>
                        </div>
                    </div>
                </aside>
            </div>
        </div>
    </div>

    <div id="reportCommentModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Report Comment</h3>
                <button class="modal-close" onclick="closeReportModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="reportCommentForm">
                    <input type="hidden" id="reportCommentId">
                    <div class="form-group">
                        <label class="form-label">Reason for reporting</label>
                        <select class="form-input" id="reportReason" required>
                            <option value="">Select a reason</option>
                            <option value="SPAM">Spam or Irrelevant Content</option>
                            <option value="HARASSMENT">Harassment or Abuse</option>
                            <option value="INAPPROPRIATE_CONTENT">Inappropriate Content</option>
                            <option value="HATE_SPEECH">Hate Speech</option>
                            <option value="OTHER">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Additional details (optional)</label>
                        <textarea class="form-input" id="reportDetails" rows="3"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-danger">Submit Report</button>
                        <button type="button" class="btn btn-secondary" onclick="closeReportModal()">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="messageContainer" style="position: fixed; top: 20px; right: 20px; z-index: 10000;"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-sql.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    
	<script th:inline="javascript">
	    const postId = /*[[${post.id}]]*/ 0;
	    const currentUserId = /*[[${#authentication?.principal?.id}]]*/ null;
	    const csrfToken = /*[[${_csrf?.token}]]*/ '';
	    const csrfHeader = /*[[${_csrf?.headerName}]]*/ 'X-CSRF-TOKEN';
	    const canDelete = /*[[${canEdit}]]*/ false;
	    const postTitle = /*[[${post.title}]]*/ '';
	    
	    document.addEventListener('DOMContentLoaded', function() {
	        const commentForm = document.getElementById('commentForm');
	        if (commentForm) {
	            commentForm.addEventListener('submit', function(e) {
	                e.preventDefault();
	                submitComment();
	            });
	        }
	        
	        const reportForm = document.getElementById('reportCommentForm');
	        if (reportForm) {
	            reportForm.addEventListener('submit', function(e) {
	                e.preventDefault();
	                submitReport();
	            });
	        }

	        if (typeof Prism !== 'undefined') {
	            Prism.highlightAll();
	        }
	    });

	    // ✅ NUOVA FUNZIONE: Cancellazione post
	    function deletePost() {
	        if (!canDelete) {
	            showMessage('You do not have permission to delete this post', 'error');
	            return;
	        }
	        
	        const confirmMessage = `Are you sure you want to delete the post "${postTitle}"?\n\nThis action cannot be undone.`;
	        
	        if (!confirm(confirmMessage)) {
	            return;
	        }
	        
	        // Mostra loading
	        const deleteBtn = document.querySelector('.delete-btn');
	        const originalContent = deleteBtn.innerHTML;
	        deleteBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Deleting...';
	        deleteBtn.disabled = true;
	        
	        const headers = { 'Content-Type': 'application/x-www-form-urlencoded' };
	        if (csrfToken) {
	            headers[csrfHeader] = csrfToken;
	        }
	        
	        fetch(`/posts/${postId}/delete`, {
	            method: 'POST',
	            headers: headers,
	            body: ''
	        })
	        .then(response => {
	            if (response.ok) {
	                showMessage('Post deleted successfully!', 'success');
	                
	                // Redirect dopo 1.5 secondi
	                setTimeout(() => {
	                    window.location.href = '/posts?success=post_deleted';
	                }, 1500);
	            } else {
	                throw new Error('Delete failed');
	            }
	        })
	        .catch(error => {
	            console.error('Error deleting post:', error);
	            showMessage('Error deleting post. Please try again.', 'error');
	            
	            // Ripristina il pulsante
	            deleteBtn.innerHTML = originalContent;
	            deleteBtn.disabled = false;
	        });
	    }

	    function submitComment() {
	        const contentElement = document.getElementById('content');
	        const content = contentElement.value.trim();
	        
	        if (!content) {
	            showMessage('Please enter a comment', 'error');
	            return;
	        }
	        
	        const params = new URLSearchParams();
	        params.append('postId', postId);
	        params.append('content', content);
	        
	        const headers = { 'Content-Type': 'application/x-www-form-urlencoded' };
	        if (csrfToken) {
	            headers[csrfHeader] = csrfToken;
	        }
	        
	        fetch('/comments/create', {
	            method: 'POST',
	            body: params.toString(),
	            headers: headers
	        })
	        .then(response => {
	            if (!response.ok) throw new Error('Network response was not ok');
	            const contentType = response.headers.get("content-type");
	            if (contentType && contentType.indexOf("application/json") !== -1) {
	                return response.json();
	            } else {
	                throw new Error("Response is not JSON");
	            }
	        })
	        .then(data => {
	            if (data.success) {
	                const commentsList = document.getElementById('commentsList');
	                const emptyComments = document.querySelector('.empty-comments');
	                if (emptyComments) {
	                    emptyComments.remove();
	                }
	                
	                if (data.commentHtml) {
	                    commentsList.insertAdjacentHTML('afterbegin', data.commentHtml);
	                }
	                
	                const commentCount = document.getElementById('commentCount');
	                if (commentCount) {
	                    commentCount.textContent = (parseInt(commentCount.textContent) || 0) + 1;
	                }
	                
	                document.getElementById('content').value = '';
	                showMessage('Comment posted successfully!', 'success');
	            } else {
	                showMessage(data.message || 'Error posting comment', 'error');
	            }
	        })
	        .catch(error => {
	            showMessage('Error posting comment: ' + error.message, 'error');
	        });
	    }

	    function showReportModal(commentId) {
	        document.getElementById('reportCommentId').value = commentId;
	        document.getElementById('reportCommentModal').style.display = 'block';
	    }

	    function closeReportModal() {
	        document.getElementById('reportCommentModal').style.display = 'none';
	        document.getElementById('reportCommentForm').reset();
	    }

	    function submitReport() {
	        const commentId = document.getElementById('reportCommentId').value;
	        const reason = document.getElementById('reportReason').value;
	        const details = document.getElementById('reportDetails').value;
	        
	        if (!reason) {
	            showMessage('Please select a reason for reporting', 'error');
	            return;
	        }
	        
	        const params = new URLSearchParams();
	        params.append('reason', reason);
	        if (details) {
	            params.append('details', details);
	        }
	        
	        const headers = { 'Content-Type': 'application/x-www-form-urlencoded' };
	        if (csrfToken) {
	            headers[csrfHeader] = csrfToken;
	        }
	        
	        fetch(`/comments/${commentId}/report`, {
	            method: 'POST',
	            body: params.toString(),
	            headers: headers
	        })
	        .then(response => {
	            if (!response.ok) throw new Error('Network response was not ok');
	            return response.json();
	        })
	        .then(data => {
	            if (data.success) {
	                showMessage(data.message || 'Comment reported successfully', 'success');
	                closeReportModal();

	                const reportButton = document.getElementById('report-btn-' + commentId);
	                if (reportButton) {
	                    reportButton.innerHTML = '<i class="fas fa-check"></i> Reported';
	                    reportButton.disabled = true;
	                }
	            } else {
	                showMessage(data.message || 'Error reporting comment', 'error');
	            }
	        })
	        .catch(error => {
	            showMessage('Error reporting comment', 'error');
	        });
	    }

	    function likeComment(commentId) {
	        const headers = { 'Content-Type': 'application/x-www-form-urlencoded' };
	        if (csrfToken) {
	            headers[csrfHeader] = csrfToken;
	        }
	        
	        fetch(`/comments/${commentId}/like`, {
	            method: 'POST',
	            headers: headers,
	            body: ''
	        })
	        .then(response => response.json())
	        .then(data => {
	            if (data.success) {
	                const likeButtons = document.querySelectorAll(`#comment-${commentId} .comment-action`);
	                likeButtons.forEach(button => {
	                    if (button.innerHTML.includes('Like')) {
	                        button.innerHTML = `<i class="fas fa-heart"></i> Like (${data.likeCount})`;
	                    }
	                });
	                showMessage('Comment liked!', 'success');
	            } else {
	                showMessage(data.message || 'Error liking comment', 'error');
	            }
	        })
	        .catch(error => {
	            showMessage('Error liking comment', 'error');
	        });
	    }

	    function deleteComment(commentId) {
	        if (!confirm('Are you sure you want to delete this comment?')) {
	            return;
	        }
	        
	        const headers = { 'Content-Type': 'application/x-www-form-urlencoded' };
	        if (csrfToken) {
	            headers[csrfHeader] = csrfToken;
	        }
	        
	        fetch(`/comments/${commentId}/delete`, {
	            method: 'POST',
	            headers: headers,
	            body: ''
	        })
	        .then(response => {
	            if (response.ok || response.redirected) {
	                const commentElement = document.getElementById(`comment-${commentId}`);
	                if (commentElement) {
	                    commentElement.remove();
	                    
	                    const commentCount = document.getElementById('commentCount');
	                    commentCount.textContent = Math.max(0, (parseInt(commentCount.textContent) || 0) - 1);
	                    
	                    showMessage('Comment deleted successfully', 'success');
	                }
	                if (response.redirected) {
	                    window.location.href = response.url;
	                }
	            } else {
	                throw new Error('Delete failed');
	            }
	        })
	        .catch(error => {
	            showMessage('Error deleting comment', 'error');
	        });
	    }

	    function cancelComment() {
	        document.getElementById('content').value = '';
	    }
	    
	    function showMessage(message, type = 'info') {
	        const container = document.getElementById('messageContainer');
	        const messageDiv = document.createElement('div');
	        messageDiv.className = `alert alert-${type}`;
	        messageDiv.style.cssText = `padding: 12px 20px; margin-bottom: 10px; border-radius: 4px; color: white; background-color: ${type === 'success' ? '#28a745' : type === 'error' ? '#dc3545' : '#17a2b8'}; box-shadow: 0 2px 4px rgba(0,0,0,0.2); animation: slideIn 0.3s ease;`;
	        messageDiv.textContent = message;
	        container.appendChild(messageDiv);
	        setTimeout(() => {
	            messageDiv.style.animation = 'slideOut 0.3s ease';
	            setTimeout(() => { if (messageDiv.parentNode) { messageDiv.parentNode.removeChild(messageDiv); } }, 300);
	        }, 3000);
	    }

	    window.onclick = function(event) {
	        const modal = document.getElementById('reportCommentModal');
	        if (event.target === modal) {
	            closeReportModal();
	        }
	    }
	</script>

	<!-- ✅ NUOVO CSS: Stili per i pulsanti action -->
	<style>
	    @keyframes slideIn { from { opacity: 0; transform: translateX(100%); } to { opacity: 1; transform: translateX(0); } }
	    @keyframes slideOut { from { opacity: 1; transform: translateX(0); } to { opacity: 0; transform: translateX(100%); } }
	    .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); display: flex; justify-content: center; align-items: center; z-index: 1000; }
	    .modal-content { background-color: #1a1a1a; padding: 20px; border-radius: 8px; width: 90%; max-width: 500px; position: relative; }
	    .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
	    .modal-header h3 { margin: 0; color: #0f0; }
	    .modal-close { background: none; border: none; color: #ccc; font-size: 24px; cursor: pointer; }
	    .modal-close:hover { color: #fff; }
	    .modal-body { margin-bottom: 20px; }
	    .form-group { margin-bottom: 15px; }
	    .form-label { display: block; margin-bottom: 5px; color: #ccc; }
	    .form-input { width: 100%; padding: 8px 12px; background-color: #2a2a2a; border: 1px solid #444; border-radius: 4px; color: #fff; }
	    .form-input:focus { outline: none; border-color: #0f0; }
	    .form-actions { display: flex; gap: 10px; justify-content: flex-end; }
	    
	    /* ✅ NUOVI STILI: Action buttons per post */
	    .action-buttons {
	        display: flex;
	        gap: 1rem;
	        align-items: center;
	        margin-top: 1rem;
	    }
	    
	    .action-btn {
	        padding: 0.6rem 1.2rem;
	        border: none;
	        border-radius: 6px;
	        cursor: pointer;
	        text-decoration: none;
	        display: inline-flex;
	        align-items: center;
	        gap: 0.5rem;
	        font-size: 0.9rem;
	        font-weight: 500;
	        transition: all 0.3s ease;
	        border: 1px solid transparent;
	    }
	    
	    .action-btn:hover {
	        transform: translateY(-2px);
	        text-decoration: none;
	        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
	    }
	    
	    .action-btn:active {
	        transform: translateY(-1px);
	    }
	    
	    /* Edit button - Blue/Cyan theme */
	    .edit-btn {
	        background: linear-gradient(135deg, #007bff, #0056b3);
	        color: white !important;
	        border-color: #007bff;
	    }
	    
	    .edit-btn:hover {
	        background: linear-gradient(135deg, #0056b3, #004085);
	        border-color: #0056b3;
	        color: white !important;
	    }
	    
	    /* Delete button - Red theme */
	    .delete-btn {
	        background: linear-gradient(135deg, #dc3545, #c82333);
	        color: white !important;
	        border-color: #dc3545;
	    }
	    
	    .delete-btn:hover {
	        background: linear-gradient(135deg, #c82333, #bd2130);
	        border-color: #c82333;
	        color: white !important;
	    }
	    
	    .delete-btn:disabled {
	        opacity: 0.6;
	        cursor: not-allowed;
	        transform: none !important;
	        box-shadow: none !important;
	    }
	    
	    /* Responsive design per action buttons */
	    @media (max-width: 768px) {
	        .action-buttons {
	            flex-direction: column;
	            gap: 0.5rem;
	            align-items: stretch;
	        }
	        
	        .action-btn {
	            justify-content: center;
	            padding: 0.7rem 1rem;
	        }
	    }
	    
	    /* Post footer styling migliorato */
	    .post-footer {
	        margin-top: 2rem;
	        padding-top: 1.5rem;
	        border-top: 1px solid rgba(255, 255, 255, 0.1);
	    }
	    
	    .post-actions {
	        margin-top: 1.5rem;
	    }
	    
	    /* Animation per il loading del delete */
	    .delete-btn .fa-spinner {
	        animation: spin 1s linear infinite;
	    }
	    
	    @keyframes spin {
	        from { transform: rotate(0deg); }
	        to { transform: rotate(360deg); }
	    }
	</style>
</body>
</html>